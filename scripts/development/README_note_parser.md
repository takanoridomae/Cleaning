# 備考欄読み取り機能

## 概要
新規物件登録画面の備考欄にテキストデータを貼り付けて「読み取り」ボタンを押すことで、お客様名・郵便番号・住所を自動抽出し、フォームに自動入力する機能です。

## 機能詳細

### 自動抽出される情報
1. **お客様名** → 物件名として「○○様　自宅」の形式で自動入力
2. **郵便番号** → 郵便番号フィールドに自動入力
3. **住所** → 住所フィールドに自動入力

### 対応している形式

#### お客様名の抽出パターン
- `田中太郎様` / `田中太郎さん`
- `お客様名：田中太郎` / `氏名：田中太郎`
- `田中　太郎` (姓名が分かれている形式)

#### 郵便番号の抽出パターン
- `〒123-4567`
- `123-4567`
- `1234567` (ハイフンなし、自動でハイフンを追加)

#### 住所の抽出パターン
- `住所：東京都新宿区西新宿1-1-1`
- `東京都新宿区西新宿1-1-1` (都道府県で始まる行)
- 市区町村で始まる行も認識

## テストデータ例

### 例1: くらしのマーケット形式
```
田中太郎様
〒635-0052
奈良県大和高田市奥田34-7
電話番号: 090-1234-5678
サービス: エアコンクリーニング
```

### 例2: ラベル付き形式
```
お客様名：山田花子
住所：〒123-4567 東京都新宿区西新宿1-1-1
連絡先：080-9876-5432
希望日時：2025年6月1日
```

### 例3: 姓名分離形式
```
佐藤　次郎
6350052
奈良県大和高田市奥田34-7
作業内容：壁掛けエアコン2台
```

### 例4: 複合形式
```
氏名: 鈴木一郎さん
郵便番号: 530-0001
大阪府大阪市北区梅田1-1-1
備考: 午前中希望
```

### 例5: 改行なし形式
```
高橋美咲様 〒060-0001 北海道札幌市中央区北1条西1丁目 連絡先090-1111-2222
```

## 使用方法

1. 新規物件登録画面にアクセス
2. 備考欄にテキストデータを貼り付け
3. 「読み取り」ボタンをクリック
4. 抽出された情報がフォームに自動入力される
5. 必要に応じて内容を確認・修正
6. 物件を登録

## 注意事項

- 抽出されない場合は、テキストの形式を確認してください
- 複数の名前や住所が含まれている場合、最初に見つかったもので入力されます
- 自動入力後は内容を確認し、必要に応じて手動で修正してください
- 既存の入力内容は上書きされます

## 開発者向け情報

### ファイル構成
- `app/templates/properties/create.html` - フロントエンド（HTML、CSS、JavaScript）
- `scripts/development/test_note_parser.py` - テストスクリプト

### JavaScript関数
- `parseNoteText(text)` - テキスト解析のメイン関数
- パターンマッチング用の正規表現が実装されています

### テスト実行
```bash
python scripts/development/test_note_parser.py
```

## 今後の改善案

- より多くのテキスト形式への対応
- 抽出精度の向上
- 複数名・複数住所の処理
- エラーハンドリングの強化 